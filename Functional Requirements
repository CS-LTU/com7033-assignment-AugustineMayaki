# NeuroPredict Web Application

WEB APPLICATION FOR HOSPITAL TO MANAGE STROKE PREDICTION (NeuroPredict)

---

## PLANNING PHASE (Scope of the project)
This web application will be developed for local hospitals with the purpose of supporting doctors and healthcare professionals to manage, analyse and predict patients with the likelihood of stroke and assist with preventive healthcare.

### Goal of Project
To help doctors and healthcare professionals securely:
- Manage registered patients’ data
- Analyse registered patients’ medical history and lifestyle factors
- Predict likelihood of stroke in registered patients
- Provide early preventive intervention with healthcare

### Stakeholders
- Doctors
- Patients
- Nurses
- Hospital Administrators

---

## FUNCTIONAL REQUIREMENTS
- Users should be able to login.
- Users should be able to reset and change their password. The system must send a verification email before users reset or change password.
- Admin should be able to register new patients and invite employees to the web application.
- Admins should be able to delete patient records and manage user accounts.
- The system must send emails containing the employee’s email and temporary password to invited employees.
- Doctors should be able to generate analysis for patients.
- Doctors and nurses should be able to view patient information.
- Doctors should be able to add/update patient data.
- Nurses should be able to add and update health notes.
- System must record and log all CRUD operations executed by users.

---

## USER CASES / USER STORIES and ACCEPTANCE CRITERIA

### Overview (users and goals)
- Doctor
  - View patient information
  - Update patient information
  - Add to patient information
  - Generate stroke analysis from patient data
- Nurse
  - View certain information about a patient
  - Update permitted patient medical data
  - Add/Update patient health notes
- Hospital Administrator
  - Login
  - Register new patients
  - Delete patient records
  - View list of registered patients
  - Invite and assign roles to hospital employees

---

### USER LOGIN
- User Story: As a registered user I want to login and access the web application.
- Use Case: Title: User login  
  Actor: Registered users (Doctor, Nurse, Admin)  
  Goal: Authenticate user and login  
  Preconditions: User account exists and user knows login credentials

Main flow:
1. User navigates to login page.
2. System displays login form.
3. User enters email and password.
4. User clicks login.
5. System validates format.
6. System gets user information from the database.
7. System sends 4‑digit OTP verification code to the registered email.
8. System displays MFA screen and requests code.
9. OTP code is valid for 5 minutes.
10. User enters code within 5 minutes and it is validated.
11. System generates access token.
12. System logs the login event.
13. System resets failed login attempts to 0.
14. System redirects user to role-appropriate screen.

Alternative flows:
- Invalid email format → disable login button.
- Invalid credentials → display error message.
- After 5 failed login attempts → lock account for 15 minutes and send notification email suggesting password change.
- User didn’t receive verification code → option to resend verification code.

Post conditions:
- User authenticated and session token generated.
- Login event logged with timestamp.
- User is given access to dashboard.

Security controls:
- MFA, log failed login attempts, lock user account, encrypt passwords, encrypt information in transit and at rest, session token generation, input validation.

Acceptance Criteria:
- All fields must be filled.
- OTP code verified.
- Account must exist in database.

---

### PATIENT REGISTRATION
- User Story: As an admin I want to be able to register new patients, so new patient records can be added to the system’s database.
- Use Case: Title: Register new patient  
  Actor: Hospital Administrator  
  Goal: Create a new patient record in the system  
  Preconditions: Admin account exists and has permission to register patients

Main flow:
1. Admin is logged in.
2. Admin navigates to patient management section.
3. Admin clicks on "Add" and system displays patient registration form.
4. Admin enters patient’s personal information:
   - Name
   - Email
   - Gender (Male/Female/Other)
   - Age
   - Marital status (Yes/No)
   - Work type (Children/Govt-job/Never worked/Private/Self-employed)
   - Residence type (Rural/Urban)
5. Admin enters emergency contact information:
   - Emergency contact name
   - Emergency contact relationship
   - Emergency contact number
6. Admin clicks "Submit".
7. System validates all required fields are completed.
8. System checks for duplicate records (email).
9. System generates unique ID for patient and saves record to database.
10. System updates/refreshes patients table.

Alternative flows:
- Missing required fields → display error message.
- Duplicate patient detected → display error message.
- Invalid data format (invalid email, age out of range) → display error message.
- Registration error → display error message and log for review.

Post conditions:
- Patient record is created in the database.

Security controls:
- Role-based access, MFA on login, input validation, encrypt patient data.

Acceptance Criteria:
- All required fields filled and valid.
- No duplicate patient record.
- Unique patient ID generated automatically.
- Successful registration logged with admin details.
- Patient data stored securely with encryption.
- Patient must be searchable after registration.

---

### STROKE ANALYSIS GENERATION
- User Story: As a doctor I want to record my patient's medical information so that the system can generate their stroke risk analysis to make informed treatment decisions.
- Use Case: Title: Stroke risk analysis  
  Actor: Doctor  
  Goal: Complete medical record and generate patient’s stroke risk analysis  
  Preconditions:
  - Doctor account exists.
  - Patient record exists (registered).
  - Patient present for medical assessment.

Main flow:
1. Doctor is logged in.
2. Doctor navigates to patient management section.
3. System displays list of patients.
4. Doctor searches for a patient by name or medical ID.
5. System displays search results.
6. Doctor clicks on the patient to access their profile.
7. Doctor reviews current information.
8. Doctor clicks on "New assessment".
9. System displays assessment form.
10. Doctor records patient information during consultation:
    - Hypertension status (Yes/No)
    - Average glucose level
    - BMI (Body Mass Index)
    - Smoking status (Formerly smoked/Never smoked/Smokes/Unknown)
    - Stroke history (Yes/No)
11. System validates fields in real time.
12. Doctor adds medical note (optional).
13. System validates fields and enables "Generate analysis" button.
14. Doctor clicks "Generate analysis".
15. System displays confirmation modal ("Generate analysis using current assessment?").
16. System sends patient information and assessment for prediction.
17. System displays analysis result and logs the event.
18. System updates the prediction table.
19. Doctor can download analysis result.

Alternative flows:
- Missing patient personal information → display error message.
- Incomplete assessment data → disable "Generate analysis" button.
- Backend error → display error message.

Post conditions:
- Assessment is saved in the database.
- Stroke result available for download.

Security controls:
- Input validation, encrypt patient data in transit and at rest, role-based access.

Acceptance Criteria:
- Generate analysis only when all medical data is complete.
- Log all analysis generation events with timestamps and doctor in charge.
- Analysis report is downloadable.

---

### EMPLOYEE INVITATION
- User Story: As a hospital administrator, I want to invite new employees and assign them roles so that they can access the system.
- Use Case: Title: Invite and assign roles to hospital employees  
  Actor: Hospital Administrator  
  Goal: Create a new user record in the system and assign roles  
  Preconditions:
  - Admin account exists.
  - Admin has permission to manage employees.
  - Valid employee email is available.

Main flow:
1. Admin logs in through MFA.
2. Admin navigates to user management section.
3. Admin clicks "Invite".
4. System displays invitation form.
5. Admin enters employee valid email, name, and selects role (Doctor/Nurse/Admin).
6. Admin clicks "Invite".
7. System validates input and checks for duplicates.
8. System sends a secure invitation email containing:
   - Welcome message
   - Securely random generated temporary password
   - Invitation link
   - Instructions for first login
9. System displays success message and adds employee to users table with status "Unconfirmed".

Alternative flows:
- Invalid invite email → display error message.
- Email already exists in system → display error message.
- Email delivery fails → system logs the event and displays error message.

Post conditions:
- Invitation sent and logged.
- System sends reminder to change password.
- Employee account created with assigned role and status "Unconfirmed".
- Invitation link expires if not used.

Security controls:
- Role-based access (only Admin can invite), email verification required, log all invitation activities, encrypt invitation transmission, rate limiting.

Acceptance Criteria:
- User record creation.
- Email invitation sent.
- Invitation activity logged.

---

### EMPLOYEE FIRST-TIME LOGIN
- User Story: As a newly invited user, I want to login into the system and access the web application.
- Use Case: Title: Employee first time login  
  Actor: Employee (Doctor, Nurse, Admin)  
  Goal: Access web application as a first-time user  
  Preconditions:
  - Employee has received invitation email.
  - Invitation link is valid.
  - Email contains necessary login details.

Main flow:
1. Employee receives invitation email.
2. Employee clicks the invitation link.
3. System verifies link validity and redirects to login page.
4. Employee logs in with email and temporary password.
5. System validates credentials and grants access.
6. System prompts user to change password with requirements.
7. User enters new password and confirmation.
8. System updates user account status to "Confirmed".
9. System invalidates invitation link and temporary password.
10. System directs user to role-appropriate screen.

Alternative flows:
- Invite email invalid → display error message.
- Invite email expired → display error page.
- New password same as temporary password → display error message.
- New password doesn’t meet requirements → display error message.
- Employee cancels change password → prompt again on next login.

Post conditions:
- User account status changed to active.
- Temporary password and invitation link invalidated.
- Employee accesses application with role permissions.
- Account confirmation is logged.

Security controls:
- Prevent temporary password reuse, account confirmation logged, input validation, access token generation.

Acceptance Criteria:
- Email invitation received.
- Account is confirmed.

---

## TODO / NOTES
- Still need user stories and acceptance criteria for Nurse and possibly Patient-facing interactions (not yet included).

---

(End of provided planning notes, reformatted and styled for a README.)
